<head>
  <!-- <script src='//unpkg.com/timelines-chart'></script> -->
  <script src="../../dist/timelines-chart.js"></script>

  <script src="../get_trace_json.js"></script>
</head>

<body>
  <script>
    const input = [
      { time: 530, id: 1, type: "Start" },
      { time: 544, id: 1, type: "Park" },
      { time: 1063, id: 1, type: "Shutdown" },
      { time: 364, id: 0, type: "Start" },
      { time: 400, id: 0, type: "Park" },
      { time: 1081, id: 0, type: "Shutdown" },
      { time: 544, id: 3, type: "Start" },
      { time: 561, id: 3, type: "Park" },
      { time: 1058, id: 3, type: "Shutdown" },
      { time: 561, id: 6, type: "Start" },
      { time: 577, id: 6, type: "Park" },
      { time: 1050, id: 6, type: "Shutdown" },
      { time: 533, id: 2, type: "Start" },
      { time: 548, id: 2, type: "Park" },
      { time: 1058, id: 2, type: "Shutdown" },
      { time: 543, id: 4, type: "Start" },
      { time: 552, id: 4, type: "Park" },
      { time: 1058, id: 4, type: "Shutdown" },
      { time: 768, id: 10, type: "Start" },
      { time: 778, id: 10, type: "Park" },
      { time: 950, id: 10, type: "Park" },
      { time: 1038, id: 10, type: "Shutdown" },
      { time: 563, id: 7, type: "Start" },
      { time: 573, id: 7, type: "Park" },
      { time: 1059, id: 7, type: "Shutdown" },
      { time: 542, id: 5, type: "Start" },
      { time: 551, id: 5, type: "Park" },
      { time: 1055, id: 5, type: "Shutdown" },
      { time: 687, id: 8, type: "Start" },
      { time: 706, id: 8, type: "Park" },
      { time: 1052, id: 8, type: "Shutdown" },
      { time: 707, id: 9, type: "Start" },
      { time: 723, id: 9, type: "Park" },
      { time: 1039, id: 9, type: "Shutdown" },
      { time: 773, id: 15, type: "Start" },
      { time: 801, id: 15, type: "RunTask task: 18" },
      { time: 37357, id: 15, type: "Park" },
      { time: 37371, id: 15, type: "Shutdown" },
      { time: 768, id: 13, type: "Start" },
      { time: 781, id: 13, type: "Park" },
      { time: 870, id: 13, type: "RunTask task: 20" },
      { time: 37645, id: 13, type: "Park" },
      { time: 37656, id: 13, type: "Shutdown" },
      { time: 766, id: 11, type: "Start" },
      { time: 781, id: 11, type: "Park" },
      { time: 926, id: 11, type: "RunTask task: 22" },
      { time: 37813, id: 11, type: "Park" },
      { time: 37825, id: 11, type: "Shutdown" },
      { time: 769, id: 12, type: "Start" },
      { time: 784, id: 12, type: "Park" },
      { time: 906, id: 12, type: "RunTask task: 21" },
      { time: 38052, id: 12, type: "Park" },
      { time: 38064, id: 12, type: "Shutdown" },
      { time: 767, id: 14, type: "Start" },
      { time: 780, id: 14, type: "Park" },
      { time: 842, id: 14, type: "RunTask task: 19" },
      { time: 38240, id: 14, type: "Park" },
      { time: 38252, id: 14, type: "Shutdown" },
    ];

    const data = processEvents(input);

    // const expectedInput = [
    //   {
    //     typ: "Start",
    //     worker_id: 3,
    //     time: 332, // in nano seconds
    //     data: {
    //       task_id: 1, // if start.
    //     }
    //   },
    //   {
    //     typ: "Park",
    //     worker_id: 1,
    //     time: 32, // in nano seconds
    //     data: {}
    //   },
    // ]
    // const data = [
    //   {
    //     group: 'Worker 1',
    //     data: [
    //       {
    //         label: 'Label 1',
    //         data: [
    //           {
    //             timeRange: [0,200],
    //             val: "task1"
    //           },
    //           {
    //             timeRange: [200, 220],
    //             val: "task2"
    //           },
    //           {
    //             timeRange: [220, 300],
    //             val: "Park"
    //           },
    //           {
    //             timeRange: [300, 300],
    //             val: "task2"
    //           },
    //         ]
    //       }
    //     ]
    //   },
    //   {
    //     group: 'Worker 2',
    //     data: [
    //       {
    //         label: 'Label 1',
    //         data: [
    //           {
    //             timeRange: [0,300],
    //             val: "task1"
    //           },
    //         ]
    //       }
    //     ]
    //   },
    //   {
    //     group: 'Worker 3',
    //     data: [
    //       {
    //         label: 'Label 1',
    //         data: [
    //           {
    //             timeRange: [0,20],
    //             val: "task3"
    //           },
    //           {
    //             timeRange: [20, 49],
    //             val: "task4"
    //           },
    //           {
    //             timeRange: [49, 300],
    //             val: "Park"
    //           },
    //         ]
    //       }
    //     ]
    //   },
    // ]

    TimelinesChart()(document.body)
      .zScaleLabel("My Scale Units")
      .zQualitative(true)
      // .dateMarker(new Date() - 365 * 24 * 60 * 60 * 1000) // Add a marker 1y ago
      // .data(myData);
      .data(data);
  </script>
</body>
